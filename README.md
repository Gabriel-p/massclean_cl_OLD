massclean_cl
============

massclean_cl




1) ** massclean_run_all.sh **

Para generar cúmulos sintéticos con los cuales validar OCAAT utilizamos el código MASSCLEAN de Popescu. Se generaron
336 cúmulos variando los parámetros masa inicial (100, 200, 300, 400, 500, 600, 700, 800) la cual es responsable de
generar cúmulos con más miembros a medida que aumentamos su valor, la distancia (0.5, 1, 1.5, 2, 2.5, 3 kpc) con la
absorción visual aumentando como 1mag/kpc y finalmente seleccionamos aquellos con determinadas edades cubriendo un
rango que coincida con las isócronas de Girardi ($10^{n}$ yr; n = 6.5, 7, 7.5, 8, 8.5, 9, 9.5)

Para cada valor de distancia se genera un campo artificial que acompañe a los cúmulos asociados a esa distancia.

Para generar los cúmulos con MASSCLEAN primero fijamos los parámetros en el archivo 'cluster.ini' y 'field.ini' y
luego corremos './all\_run' en el código.
Para generar el archivo de campo ('field.plot') corremos en secuencia los comandos:
./goimage2, ./gofield2, chmod u+x add\_field y finalmente ./add\_field.
  
  
Los nombres de las carpetas están compuestos por (masa inicial)/100 en los dos primeros caracteres
y la distancia en parsec en los caracteres luego del guión bajo.

Los archivos '*_field.plot' contienen a las estrellas de campo donde los caracteres antes del guión
bajo corresponden a la distancia a la que se ubica el campo. Cada cúmulo debe fusionarse con el campo
que le corresponde de acuerdo a la distancia.


El proceso para generar los archivos del cúmulo y el campo son los siguientes:

1- Modifico los valores de masa inicial, distancia y Av en 'cluster.ini' (el archivo 'field.ini' no
hace falta modificarlo)
2- Corro 

./all.run

para generar los archivos *.trek que me dan los cúmulos sintéticos en diferentes
edades para los valores de masa inicial, distancia y Av. Guardo estos archivos (para las 9 edades utilizadas)
en su carpeta correspondiente.
3- Genero el archivo de campo sólo una vez (a la vez que genero los cúmulos con la menor masa inicial)
de la siguiente manera:

a- ./goimage2
b- ./gofield2
c- chmod u+x add_field
d- ./add_field

Lo cual genera el archivo 'field.plot' con estrellas de campo a una dada distancia y Av.

4- Corro ./clean.all para limpiar todos los archivos generados.
5- Vuelvo a 1.



2) ** massclean_cluster_field_merge.py **
Merge cluster and field output files from MASSCLEAN (generated by the above script) to feed OCAAT.
Assigns an estimated photometric error to all stars and applies gaussian noise to data (based on this error).


3) ** massclean_member_index.py **
Calculates all member_index defined, for a given decontamination algorithm. Plots the output as a
CI vs MI diagram for each member index defined.


4) ** massclean_avrg_MI_algors.py ** SEMI-DEPRECATED
Plots the average member_index values for all the decontamination algorithms used, for each of the member indexes defined.


5) ** massclean_real_vs_fit_params.py **
Plots the real parameter values (z, E(B-V), age, dist) of MASSCLEAN clusters versus the ones obtained with the
automatic isochrone fitting algorithm.



Los parámetros CI y MI son respectivamente el 'contamination index' y el 'member index'. El primero estima la contaminación de estrellas
de campo presente en la región del cúmulo (definida por el centro y radio asignados) e implica un cúmulo más contaminado para valores
más cercanos a 1. El segundo es un estimador de cuán bueno es el comportamiento del algoritmo de decontaminación aplicado, un valor de
1 implica un funcionamiento perfecto del algoritmo (o sea: sólo los miembros reales del cúmulo fueron detectados como tales con un 
peso o probabilidad de 100% asignado a todos ellos). A medida que este parámetro decrece implica un funcionamiento más pobre del algoritmo.
Se aplicaron 3 MI diferentes, cada uno más estricto que el anterior.

Las variables usadas para definir los 3 MI son:

N_T: cantidad total *real* de estrellas miembros del cúmulo sintético (o sea: cantidad de estrellas en el cúmulo generado por MASSCLEAN).
n_m: cantidad de *miembros reales* que el algoritmo asignó como tales.
n_f: cantidad de *estrellas de campo* que el algoritmo asignó como miembros reales.
w_m: peso o probabilidad de pertenecer al cúmulo (entre 0 y 1) asignado a un miembro real detectado como tal.
w_f: peso o probabilidad de pertenecer al cúmulo (entre 0 y 1) asignado a una estrella de campo detectada como miembro real.

En general los 3 MI pueden describirse como sigue:

MI_1: solamente tiene en cuenta la proporción de miembros reales recuperados vs la cantidad total real de miembros. Para este
índice, un valor de 0.5 significa que la mitad de los miembros reales fueron recuperados (sin tener en cuenta los pesos dados
a cada uno ni la cantidad de estrellas de campo asignadas como miembros).
MI_2: tiene en cuenta los pesos asignados a cada estrella y castiga al algoritmo cuando asigna probabilidades altas a estrellas
de campo y bajas a miembros reales.
MI_3: igual a MI_2 con el agregado de que también castiga cuando el número *total* de estrellas asignadas como miembros del cúmulo
(n_m + n_f) se aleja del número real N_T.